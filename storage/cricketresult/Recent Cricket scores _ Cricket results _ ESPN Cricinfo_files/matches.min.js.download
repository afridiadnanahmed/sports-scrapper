function getRefreshInterval(){var liveDataSectionElem=$("#live-match-data");var refreshInterval=liveDataSectionElem.data("live-refresh");if(typeof refreshInterval!=="undefined"){refreshInterval=refreshInterval*1e3}else{refreshInterval=12e4}return refreshInterval}function fetchLiveMatchData(){var page_url="/ci/engine/match/index/live.html";var liveDataSectionElem=$("#live-match-data");var refreshInterval=getRefreshInterval();var queryString=document.location.search;if(liveDataSectionElem.length>0){liveDataSectionElem.addClass("loading");if(liveDataSectionElem.find(".preload").length===0){var liveDataSectionElemH=liveDataSectionElem.outerHeight();var preloaderHtml='<div class="p-overlay"></div><div class="preload"><div class="preloader_div"></div></div>';liveDataSectionElem.append(preloaderHtml).show().height(liveDataSectionElemH);if(liveDataSectionElemH>300){$(".matches-content .preload").css("top",Math.floor(liveDataSectionElemH*.05))}}$.ajax({url:page_url+queryString,dataType:"html",type:"GET",success:function(r){liveDataSectionElem.removeClass("loading");updateMatchData(r);setTimeout(function(){loadLiveData()},refreshInterval)},error:function(i,v,x){var errormsg='<p class="no-matches">Unexpected error, <a href="#" class="retry-data">Please try again</a></p>';liveDataSectionElem.html(errormsg);$(".retry-data").on("click",function(){loadLiveData()})}})}}function updateMatchData(r){var liveDataSectionElem=$("#live-match-data");liveDataSectionElem.css("height","auto");$(".p-overlay, .match-content .preload").remove();liveDataSectionElem.html(r)}function loadLiveData(){fetchLiveMatchData()}function getSeriesIdFromSummaryUrl(str){var strarr=str.split("seriesid=");return strarr[0]}function addOddEvenForGameBlocks(){$(".matches-day-block").each(function(){var gameSectionObj=$(this).find(".default-match-block");gameSectionObj.each(function(){var index=$(this).index();if(index%2===0){$(this).addClass("even")}else{$(this).addClass("odd")}})})}$.fn.initSeriesToggle=function(){$("series-summary-block").addClass("collapsed");$("series-summary-block .detailed-summary").hide();$(this).each(function(e){var seriessummaryblockObj=$(this).parent();seriessummaryblockObj.bind("mouseenter",function(){seriessummaryblockObj.removeClass("fadein").addClass("fadeout")});seriessummaryblockObj.bind("mouseleave",function(){seriessummaryblockObj.removeClass("fadeout").addClass("fadein")});var toggleObj=$(this).find(".toggle");seriessummaryblockObj.on("click",".toggle, .brief-summary",function(c){c.preventDefault();var seriessummaryblockSel=$(this).find(".toggle").parent().parent();if(seriessummaryblockSel.is(".collapsed")){seriessummaryblockSel.removeClass("collapsed").addClass("expanded");seriessummaryblockSel.find(".toggle").find(".icon").html("-");var url=seriessummaryblockSel.attr("data-summary-url");var detailedSummaryObj=seriessummaryblockSel.find(".detailed-summary");detailedSummaryObj.addClass("loading");var matchesDayBlock=detailedSummaryObj.find(".matches-day-block");if(detailedSummaryObj.find(".preload").length===0){var preloaderHtml='<div class="preload"><div class="preloader_div"></div></div>';detailedSummaryObj.html(preloaderHtml).show()}$.ajax({url:url,type:"GET",dataType:"html",success:function(res){detailedSummaryObj.html(res);detailedSummaryObj.removeClass("loading");var ajaxGameSectionObj=detailedSummaryObj.find(".default-match-block");ajaxGameSectionObj.each(function(){var index=$(this).index();if(index%2===0){$(this).addClass("even")}else{$(this).addClass("odd")}})},error:function(){var errormsg='<p>Unexpected error, <a href="#" class="retry-details">Please try again</a></p>';detailedSummaryObj.removeClass("loading");detailedSummaryObj.html(errormsg)}})}else{seriessummaryblockSel.removeClass("expanded").addClass("collapsed");$(this).find(".icon").html("+")}})})};$.fn.initMatchesMobileTabs=function(){var tabSelectObj=$(this).find("select");tabSelectObj.change(function(){var param=$(this).val();var currurl=window.location.href;var redirectURL="http://"+window.location.hostname+param;if(param!="#"){window.location.href=redirectURL}else{return false}})};$.fn.initMatchesSearch=function(){var searchInput=$(this).find(".msearchtextbox input");var searchSubmit=$(this).find(".msearchbutton input");var searchForm=$(this).find(".matches-search");searchForm.submit(function(c){var searchString=searchInput.val();if(searchString.toLowerCase()!=="search match"){if(searchString.length>0){var queryString=searchForm.serialize();var redirectURL=searchForm.attr("action")+"?"+queryString;window.location.href=redirectURL}else{alert("Please enter search keyword")}}else{alert("Please enter search keyword")}return false})};function searchInfoInit(){var searchInfo=".search-info",searchInfoIcon=".search-infoicon",close=".close",msgPopClass="pop";var $searchInfo=$(searchInfo);function togSearchInfo(){$searchInfo.toggleClass(msgPopClass)}function closeSearchInfo(){$searchInfo.removeClass(msgPopClass)}$searchInfo.on("click touchstart",searchInfoIcon,togSearchInfo);$searchInfo.on("click touchstart",close,closeSearchInfo);$(document).on("click touchstart",closeSearchInfo);$searchInfo.on("click touchstart",function(e){e.stopPropagation()})}function initTabs(){$(document).on("click",".most-viewed-tabs a",function(e){e.preventDefault();var $this=$(this);var contentParent=$this.parents("ul").data("contentparent");var contentTarget=$this.attr("href");var contentSiblings=".tabs-content";$(contentParent).children(contentSiblings).hide().end().children(contentTarget).show();if(typeof tabname!=="undefined"){updateLiveScoresSliders(contentTarget,tabname,isTabSwitched)}var $tabParent=$(this).parent();var highlighted="selected";if($tabParent.hasClass(highlighted)===false){$tabParent.siblings().removeClass(highlighted);$tabParent.addClass(highlighted)}})}$(document).ready(function(){$(".matches-tabs-mobile").initMatchesMobileTabs();$(".matches-search-wrap").initMatchesSearch();searchInfoInit();$(".series-summary-block.collapsed .brief-summary").initSeriesToggle();addOddEvenForGameBlocks();initTabs();var refreshInterval=getRefreshInterval();setTimeout(loadLiveData,refreshInterval)});